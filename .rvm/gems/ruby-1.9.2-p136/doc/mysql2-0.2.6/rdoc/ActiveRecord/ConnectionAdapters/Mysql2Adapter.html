<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

	<title>Class: ActiveRecord::ConnectionAdapters::Mysql2Adapter</title>

	<link rel="stylesheet" href="../../rdoc.css" type="text/css" media="screen" />

	<script src="../../js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="class">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../../index.html">Home</a>
          <a href="../../index.html#classes">Classes</a>
          <a href="../../index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="../../lib/active_record/connection_adapters/mysql2_adapter_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/active_record/connection_adapters/mysql2_adapter.rb">lib/active_record/connection_adapters/mysql2_adapter.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			
			<div id="parent-class-section" class="section">
				<h3 class="section-header">Parent</h3>
				
				<p class="link">AbstractAdapter</p>
				
			</div>
			

			<!-- Namespace Contents -->
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#method-c-new">::new</a></li>
					
					<li><a href="#method-i-active%3F">#active?</a></li>
					
					<li><a href="#method-i-adapter_name">#adapter_name</a></li>
					
					<li><a href="#method-i-add_column">#add_column</a></li>
					
					<li><a href="#method-i-add_column_position%21">#add_column_position!</a></li>
					
					<li><a href="#method-i-add_limit_offset%21">#add_limit_offset!</a></li>
					
					<li><a href="#method-i-begin_db_transaction">#begin_db_transaction</a></li>
					
					<li><a href="#method-i-case_sensitive_equality_operator">#case_sensitive_equality_operator</a></li>
					
					<li><a href="#method-i-change_column">#change_column</a></li>
					
					<li><a href="#method-i-change_column_default">#change_column_default</a></li>
					
					<li><a href="#method-i-change_column_null">#change_column_null</a></li>
					
					<li><a href="#method-i-charset">#charset</a></li>
					
					<li><a href="#method-i-collation">#collation</a></li>
					
					<li><a href="#method-i-column_for">#column_for</a></li>
					
					<li><a href="#method-i-columns">#columns</a></li>
					
					<li><a href="#method-i-commit_db_transaction">#commit_db_transaction</a></li>
					
					<li><a href="#method-i-configure_connection">#configure_connection</a></li>
					
					<li><a href="#method-i-connect">#connect</a></li>
					
					<li><a href="#method-i-create">#create</a></li>
					
					<li><a href="#method-i-create_database">#create_database</a></li>
					
					<li><a href="#method-i-create_savepoint">#create_savepoint</a></li>
					
					<li><a href="#method-i-create_table">#create_table</a></li>
					
					<li><a href="#method-i-current_database">#current_database</a></li>
					
					<li><a href="#method-i-disconnect%21">#disconnect!</a></li>
					
					<li><a href="#method-i-drop_table">#drop_table</a></li>
					
					<li><a href="#method-i-execute">#execute</a></li>
					
					<li><a href="#method-i-indexes">#indexes</a></li>
					
					<li><a href="#method-i-insert_sql">#insert_sql</a></li>
					
					<li><a href="#method-i-limited_update_conditions">#limited_update_conditions</a></li>
					
					<li><a href="#method-i-native_database_types">#native_database_types</a></li>
					
					<li><a href="#method-i-pk_and_sequence_for">#pk_and_sequence_for</a></li>
					
					<li><a href="#method-i-primary_key">#primary_key</a></li>
					
					<li><a href="#method-i-quote">#quote</a></li>
					
					<li><a href="#method-i-quote_string">#quote_string</a></li>
					
					<li><a href="#method-i-quoted_columns_for_index">#quoted_columns_for_index</a></li>
					
					<li><a href="#method-i-quoted_false">#quoted_false</a></li>
					
					<li><a href="#method-i-quoted_true">#quoted_true</a></li>
					
					<li><a href="#method-i-reconnect%21">#reconnect!</a></li>
					
					<li><a href="#method-i-recreate_database">#recreate_database</a></li>
					
					<li><a href="#method-i-release_savepoint">#release_savepoint</a></li>
					
					<li><a href="#method-i-rename_column">#rename_column</a></li>
					
					<li><a href="#method-i-rename_table">#rename_table</a></li>
					
					<li><a href="#method-i-requires_reloading%3F">#requires_reloading?</a></li>
					
					<li><a href="#method-i-reset%21">#reset!</a></li>
					
					<li><a href="#method-i-rollback_db_transaction">#rollback_db_transaction</a></li>
					
					<li><a href="#method-i-rollback_to_savepoint">#rollback_to_savepoint</a></li>
					
					<li><a href="#method-i-select">#select</a></li>
					
					<li><a href="#method-i-select_rows">#select_rows</a></li>
					
					<li><a href="#method-i-show_variable">#show_variable</a></li>
					
					<li><a href="#method-i-structure_dump">#structure_dump</a></li>
					
					<li><a href="#method-i-supports_migrations%3F">#supports_migrations?</a></li>
					
					<li><a href="#method-i-supports_primary_key%3F">#supports_primary_key?</a></li>
					
					<li><a href="#method-i-supports_savepoints%3F">#supports_savepoints?</a></li>
					
					<li><a href="#method-i-supports_views%3F">#supports_views?</a></li>
					
					<li><a href="#method-i-tables">#tables</a></li>
					
					<li><a href="#method-i-translate_exception">#translate_exception</a></li>
					
					<li><a href="#method-i-type_to_sql">#type_to_sql</a></li>
					
					<li><a href="#method-i-update_sql">#update_sql</a></li>
					
					<li><a href="#method-i-version">#version</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="../../README_rdoc.html">README.rdoc</a></li>
				
					<li class="file"><a href="../../ext/mysql2/Makefile.html">Makefile</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="../../images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="../../Mysql2.html">Mysql2</a></li>
				
					<li><a href="../../Mysql2/Client.html">Mysql2::Client</a></li>
				
					<li><a href="../../Mysql2/EM.html">Mysql2::EM</a></li>
				
					<li><a href="../../Mysql2/EM/Client.html">Mysql2::EM::Client</a></li>
				
					<li><a href="../../Mysql2/EM/Client/Watcher.html">Mysql2::EM::Client::Watcher</a></li>
				
					<li><a href="../../Mysql2/Error.html">Mysql2::Error</a></li>
				
					<li><a href="../../Mysql2/Fibered.html">Mysql2::Fibered</a></li>
				
					<li><a href="../../Mysql2/Fibered/Client.html">Mysql2::Fibered::Client</a></li>
				
					<li><a href="../../Mysql2/Fibered/Client/Watcher.html">Mysql2::Fibered::Client::Watcher</a></li>
				
					<li><a href="../../Mysql2/Result.html">Mysql2::Result</a></li>
				
					<li><a href="../../ActiveRecord.html">ActiveRecord</a></li>
				
					<li><a href="../../ActiveRecord/Base.html">ActiveRecord::Base</a></li>
				
					<li><a href="../../ActiveRecord/ConnectionAdapters.html">ActiveRecord::ConnectionAdapters</a></li>
				
					<li><a href="../../ActiveRecord/ConnectionAdapters/ConnectionPool.html">ActiveRecord::ConnectionAdapters::ConnectionPool</a></li>
				
					<li><a href="../../ActiveRecord/ConnectionAdapters/FiberedMonitor.html">ActiveRecord::ConnectionAdapters::FiberedMonitor</a></li>
				
					<li><a href="../../ActiveRecord/ConnectionAdapters/FiberedMonitor/Queue.html">ActiveRecord::ConnectionAdapters::FiberedMonitor::Queue</a></li>
				
					<li><a href="../../ActiveRecord/ConnectionAdapters/Mysql2Adapter.html">ActiveRecord::ConnectionAdapters::Mysql2Adapter</a></li>
				
					<li><a href="../../ActiveRecord/ConnectionAdapters/Mysql2Column.html">ActiveRecord::ConnectionAdapters::Mysql2Column</a></li>
				
					<li><a href="../../Arel.html">Arel</a></li>
				
					<li><a href="../../Arel/SqlCompiler.html">Arel::SqlCompiler</a></li>
				
					<li><a href="../../Arel/SqlCompiler/Mysql2Compiler.html">Arel::SqlCompiler::Mysql2Compiler</a></li>
				
					<li><a href="../../Object.html">Object</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="class">ActiveRecord::ConnectionAdapters::Mysql2Adapter</h1>

		<div id="description">
			
		</div>

		<!-- Constants -->
		
		<div id="constants-list" class="section">
			<h3 class="section-header">Constants</h3>
			<dl>
			
				<dt><a name="ADAPTER_NAME">ADAPTER_NAME</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="PRIMARY">PRIMARY</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="LOST_CONNECTION_ERROR_MESSAGES">LOST_CONNECTION_ERROR_MESSAGES</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="QUOTED_FALSE">QUOTED_FALSE</a></dt>
				
				<dd class="description"></dd>
				
			
				<dt><a name="NATIVE_DATABASE_TYPES">NATIVE_DATABASE_TYPES</a></dt>
				
				<dd class="description"></dd>
				
			
			</dl>
		</div>
		

		<!-- Attributes -->
		

		<!-- Methods -->
		
		<div id="public-class-method-details" class="method-section section">
			<h3 class="section-header">Public Class Methods</h3>

		
			<div id="new-method" class="method-detail ">
				<a name="method-c-new"></a>

				<div class="method-heading">
				
					<span class="method-name">new</span><span
						class="method-args">(connection, logger, connection_options, config)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="new-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 165</span>
165:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">connection</span>, <span class="ruby-identifier">logger</span>, <span class="ruby-identifier">connection_options</span>, <span class="ruby-identifier">config</span>)
166:         <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">connection</span>, <span class="ruby-identifier">logger</span>)
167:         <span class="ruby-ivar">@connection_options</span>, <span class="ruby-ivar">@config</span> = <span class="ruby-identifier">connection_options</span>, <span class="ruby-identifier">config</span>
168:         <span class="ruby-ivar">@quoted_column_names</span>, <span class="ruby-ivar">@quoted_table_names</span> = {}, {}
169:         <span class="ruby-identifier">configure_connection</span>
170:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="public-instance-method-details" class="method-section section">
			<h3 class="section-header">Public Instance Methods</h3>

		
			<div id="active--method" class="method-detail ">
				<a name="method-i-active%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">active?</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
CONNECTION MANAGEMENT ====================================
</p>
					

					
					<div class="method-source-code"
						id="active--source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 240</span>
240:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">active?</span>
241:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@connection</span>
242:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">query</span> <span class="ruby-value str">'select 1'</span>
243:         <span class="ruby-keyword kw">true</span>
244:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Mysql2</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>
245:         <span class="ruby-keyword kw">false</span>
246:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="adapter-name-method" class="method-detail ">
				<a name="method-i-adapter_name"></a>

				<div class="method-heading">
				
					<span class="method-name">adapter_name</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="adapter-name-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 172</span>
172:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">adapter_name</span>
173:         <span class="ruby-constant">ADAPTER_NAME</span>
174:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="add-column-method" class="method-detail ">
				<a name="method-i-add_column"></a>

				<div class="method-heading">
				
					<span class="method-name">add_column</span><span
						class="method-args">(table_name, column_name, type, options = {})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="add-column-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 477</span>
477:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_column</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">options</span> = {})
478:         <span class="ruby-identifier">add_column_sql</span> = <span class="ruby-node">&quot;ALTER TABLE #{quote_table_name(table_name)} ADD #{quote_column_name(column_name)} #{type_to_sql(type, options[:limit], options[:precision], options[:scale])}&quot;</span>
479:         <span class="ruby-identifier">add_column_options!</span>(<span class="ruby-identifier">add_column_sql</span>, <span class="ruby-identifier">options</span>)
480:         <span class="ruby-identifier">add_column_position!</span>(<span class="ruby-identifier">add_column_sql</span>, <span class="ruby-identifier">options</span>)
481:         <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">add_column_sql</span>)
482:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="add-column-position--method" class="method-detail ">
				<a name="method-i-add_column_position%21"></a>

				<div class="method-heading">
				
					<span class="method-name">add_column_position!</span><span
						class="method-args">(sql, options)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="add-column-position--source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 544</span>
544:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_column_position!</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">options</span>)
545:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:first</span>]
546:           <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; FIRST&quot;</span>
547:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:after</span>]
548:           <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; AFTER #{quote_column_name(options[:after])}&quot;</span>
549:         <span class="ruby-keyword kw">end</span>
550:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="add-limit-offset--method" class="method-detail ">
				<a name="method-i-add_limit_offset%21"></a>

				<div class="method-heading">
				
					<span class="method-name">add_limit_offset!</span><span
						class="method-args">(sql, options)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="add-limit-offset--source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 365</span>
365:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_limit_offset!</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">options</span>)
366:         <span class="ruby-identifier">limit</span>, <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:limit</span>], <span class="ruby-identifier">options</span>[<span class="ruby-value">:offset</span>]
367:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">limit</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">offset</span>
368:           <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; LIMIT #{offset.to_i}, #{sanitize_limit(limit)}&quot;</span>
369:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">limit</span>
370:           <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; LIMIT #{sanitize_limit(limit)}&quot;</span>
371:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">offset</span>
372:           <span class="ruby-identifier">sql</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; OFFSET #{offset.to_i}&quot;</span>
373:         <span class="ruby-keyword kw">end</span>
374:         <span class="ruby-identifier">sql</span>
375:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="begin-db-transaction-method" class="method-detail ">
				<a name="method-i-begin_db_transaction"></a>

				<div class="method-heading">
				
					<span class="method-name">begin_db_transaction</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="begin-db-transaction-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 335</span>
335:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">begin_db_transaction</span>
336:         <span class="ruby-identifier">execute</span> <span class="ruby-value str">&quot;BEGIN&quot;</span>
337:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>
338:         <span class="ruby-comment cmt"># Transactions aren't supported</span>
339:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="case-sensitive-equality-operator-method" class="method-detail ">
				<a name="method-i-case_sensitive_equality_operator"></a>

				<div class="method-heading">
				
					<span class="method-name">case_sensitive_equality_operator</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="case-sensitive-equality-operator-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 572</span>
572:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">case_sensitive_equality_operator</span>
573:         <span class="ruby-value str">&quot;= BINARY&quot;</span>
574:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="change-column-method" class="method-detail ">
				<a name="method-i-change_column"></a>

				<div class="method-heading">
				
					<span class="method-name">change_column</span><span
						class="method-args">(table_name, column_name, type, options = {})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="change-column-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 499</span>
499:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">change_column</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">options</span> = {})
500:         <span class="ruby-identifier">column</span> = <span class="ruby-identifier">column_for</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
501: 
502:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options_include_default?</span>(<span class="ruby-identifier">options</span>)
503:           <span class="ruby-identifier">options</span>[<span class="ruby-value">:default</span>] = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">default</span>
504:         <span class="ruby-keyword kw">end</span>
505: 
506:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">:null</span>)
507:           <span class="ruby-identifier">options</span>[<span class="ruby-value">:null</span>] = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">null</span>
508:         <span class="ruby-keyword kw">end</span>
509: 
510:         <span class="ruby-identifier">change_column_sql</span> = <span class="ruby-node">&quot;ALTER TABLE #{quote_table_name(table_name)} CHANGE #{quote_column_name(column_name)} #{quote_column_name(column_name)} #{type_to_sql(type, options[:limit], options[:precision], options[:scale])}&quot;</span>
511:         <span class="ruby-identifier">add_column_options!</span>(<span class="ruby-identifier">change_column_sql</span>, <span class="ruby-identifier">options</span>)
512:         <span class="ruby-identifier">add_column_position!</span>(<span class="ruby-identifier">change_column_sql</span>, <span class="ruby-identifier">options</span>)
513:         <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">change_column_sql</span>)
514:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="change-column-default-method" class="method-detail ">
				<a name="method-i-change_column_default"></a>

				<div class="method-heading">
				
					<span class="method-name">change_column_default</span><span
						class="method-args">(table_name, column_name, default)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="change-column-default-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 484</span>
484:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">change_column_default</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">default</span>)
485:         <span class="ruby-identifier">column</span> = <span class="ruby-identifier">column_for</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
486:         <span class="ruby-identifier">change_column</span> <span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">column</span>.<span class="ruby-identifier">sql_type</span>, <span class="ruby-value">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">default</span>
487:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="change-column-null-method" class="method-detail ">
				<a name="method-i-change_column_null"></a>

				<div class="method-heading">
				
					<span class="method-name">change_column_null</span><span
						class="method-args">(table_name, column_name, null, default = nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="change-column-null-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 489</span>
489:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">change_column_null</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">null</span>, <span class="ruby-identifier">default</span> = <span class="ruby-keyword kw">nil</span>)
490:         <span class="ruby-identifier">column</span> = <span class="ruby-identifier">column_for</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
491: 
492:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">null</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">default</span>.<span class="ruby-identifier">nil?</span>
493:           <span class="ruby-identifier">execute</span>(<span class="ruby-node">&quot;UPDATE #{quote_table_name(table_name)} SET #{quote_column_name(column_name)}=#{quote(default)} WHERE #{quote_column_name(column_name)} IS NULL&quot;</span>)
494:         <span class="ruby-keyword kw">end</span>
495: 
496:         <span class="ruby-identifier">change_column</span> <span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">column</span>.<span class="ruby-identifier">sql_type</span>, <span class="ruby-value">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">null</span>
497:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="charset-method" class="method-detail ">
				<a name="method-i-charset"></a>

				<div class="method-heading">
				
					<span class="method-name">charset</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns the database character set.
</p>
					

					
					<div class="method-source-code"
						id="charset-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 421</span>
421:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">charset</span>
422:         <span class="ruby-identifier">show_variable</span> <span class="ruby-value str">'character_set_database'</span>
423:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="collation-method" class="method-detail ">
				<a name="method-i-collation"></a>

				<div class="method-heading">
				
					<span class="method-name">collation</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns the database collation strategy.
</p>
					

					
					<div class="method-source-code"
						id="collation-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 426</span>
426:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">collation</span>
427:         <span class="ruby-identifier">show_variable</span> <span class="ruby-value str">'collation_database'</span>
428:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="columns-method" class="method-detail ">
				<a name="method-i-columns"></a>

				<div class="method-heading">
				
					<span class="method-name">columns</span><span
						class="method-args">(table_name, name = nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="columns-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 459</span>
459:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">columns</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>)
460:         <span class="ruby-identifier">sql</span> = <span class="ruby-node">&quot;SHOW FIELDS FROM #{quote_table_name(table_name)}&quot;</span>
461:         <span class="ruby-identifier">columns</span> = []
462:         <span class="ruby-identifier">result</span> = <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-value">:skip_logging</span>)
463:         <span class="ruby-identifier">result</span>.<span class="ruby-identifier">each</span>(<span class="ruby-value">:symbolize_keys</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:hash</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span>
464:           <span class="ruby-identifier">columns</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Mysql2Column</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">field</span>[<span class="ruby-value">:Field</span>], <span class="ruby-identifier">field</span>[<span class="ruby-value">:Default</span>], <span class="ruby-identifier">field</span>[<span class="ruby-value">:Type</span>], <span class="ruby-identifier">field</span>[<span class="ruby-value">:Null</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;YES&quot;</span>)
465:         }
466:         <span class="ruby-identifier">columns</span>
467:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="commit-db-transaction-method" class="method-detail ">
				<a name="method-i-commit_db_transaction"></a>

				<div class="method-heading">
				
					<span class="method-name">commit_db_transaction</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="commit-db-transaction-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 341</span>
341:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">commit_db_transaction</span>
342:         <span class="ruby-identifier">execute</span> <span class="ruby-value str">&quot;COMMIT&quot;</span>
343:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>
344:         <span class="ruby-comment cmt"># Transactions aren't supported</span>
345:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="create-method" class="method-detail method-alias">
				<a name="method-i-create"></a>

				<div class="method-heading">
				
					<span class="method-name">create</span><span
						class="method-args">(sql, name = nil, pk = nil, id_value = nil, sequence_name = nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
				</div>

				

				
				<div class="aliases">
          Alias for: <a href="Mysql2Adapter.html#method-i-insert_sql">insert_sql</a>
				</div>
				
			</div>

		
			<div id="create-database-method" class="method-detail ">
				<a name="method-i-create_database"></a>

				<div class="method-heading">
				
					<span class="method-name">create_database</span><span
						class="method-args">(name, options = {})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Create a new MySQL database with optional <tt>:charset</tt> and
<tt>:collation</tt>. Charset defaults to utf8.
</p>
<p>
Example:
</p>
<pre>
  create_database 'charset_test', :charset =&gt; 'latin1', :collation =&gt; 'latin1_bin'
  create_database 'matt_development'
  create_database 'matt_development', :charset =&gt; :big5</pre>
					

					
					<div class="method-source-code"
						id="create-database-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 404</span>
404:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_database</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {})
405:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:collation</span>]
406:           <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;CREATE DATABASE `#{name}` DEFAULT CHARACTER SET `#{options[:charset] || 'utf8'}` COLLATE `#{options[:collation]}`&quot;</span>
407:         <span class="ruby-keyword kw">else</span>
408:           <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;CREATE DATABASE `#{name}` DEFAULT CHARACTER SET `#{options[:charset] || 'utf8'}`&quot;</span>
409:         <span class="ruby-keyword kw">end</span>
410:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="create-savepoint-method" class="method-detail ">
				<a name="method-i-create_savepoint"></a>

				<div class="method-heading">
				
					<span class="method-name">create_savepoint</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="create-savepoint-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 353</span>
353:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_savepoint</span>
354:         <span class="ruby-identifier">execute</span>(<span class="ruby-node">&quot;SAVEPOINT #{current_savepoint_name}&quot;</span>)
355:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="create-table-method" class="method-detail ">
				<a name="method-i-create_table"></a>

				<div class="method-heading">
				
					<span class="method-name">create_table</span><span
						class="method-args">(table_name, options = {})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="create-table-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 469</span>
469:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_table</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span> = {})
470:         <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">reverse_merge</span>(<span class="ruby-value">:options</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;ENGINE=InnoDB&quot;</span>))
471:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="current-database-method" class="method-detail ">
				<a name="method-i-current_database"></a>

				<div class="method-heading">
				
					<span class="method-name">current_database</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="current-database-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 416</span>
416:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">current_database</span>
417:         <span class="ruby-identifier">select_value</span> <span class="ruby-value str">'SELECT DATABASE() as db'</span>
418:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="disconnect--method" class="method-detail ">
				<a name="method-i-disconnect%21"></a>

				<div class="method-heading">
				
					<span class="method-name">disconnect!</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="disconnect--source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 258</span>
258:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">disconnect!</span>
259:         <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">nil?</span>
260:           <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">close</span>
261:           <span class="ruby-ivar">@connection</span> = <span class="ruby-keyword kw">nil</span>
262:         <span class="ruby-keyword kw">end</span>
263:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="drop-table-method" class="method-detail ">
				<a name="method-i-drop_table"></a>

				<div class="method-heading">
				
					<span class="method-name">drop_table</span><span
						class="method-args">(table_name, options = {})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="drop-table-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 438</span>
438:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">drop_table</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span> = {})
439:         <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span>)
440:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="execute-method" class="method-detail ">
				<a name="method-i-execute"></a>

				<div class="method-heading">
				
					<span class="method-name">execute</span><span
						class="method-args">(sql, name = nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Executes the SQL statement in the context of this connection.
</p>
					

					
					<div class="method-source-code"
						id="execute-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 307</span>
307:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>)
308:         <span class="ruby-comment cmt"># make sure we carry over any changes to ActiveRecord::Base.default_timezone that have been</span>
309:         <span class="ruby-comment cmt"># made since we established the connection</span>
310:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">query_options</span>[<span class="ruby-value">:database_timezone</span>] = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">default_timezone</span>
311:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-value">:skip_logging</span>
312:           <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">query</span>(<span class="ruby-identifier">sql</span>)
313:         <span class="ruby-keyword kw">else</span>
314:           <span class="ruby-identifier">log</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span>) { <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">query</span>(<span class="ruby-identifier">sql</span>) }
315:         <span class="ruby-keyword kw">end</span>
316:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">StatementInvalid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">exception</span>
317:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;:&quot;</span>).<span class="ruby-identifier">first</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/Packets out of order/</span>
318:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">StatementInvalid</span>, <span class="ruby-value str">&quot;'Packets out of order' error was received from the database. Please update your mysql bindings (gem install mysql) and read http://dev.mysql.com/doc/mysql/en/password-hashing.html for more information.  If you're on Windows, use the Instant Rails installer to get the updated mysql bindings.&quot;</span>
319:         <span class="ruby-keyword kw">else</span>
320:           <span class="ruby-identifier">raise</span>
321:         <span class="ruby-keyword kw">end</span>
322:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="indexes-method" class="method-detail ">
				<a name="method-i-indexes"></a>

				<div class="method-heading">
				
					<span class="method-name">indexes</span><span
						class="method-args">(table_name, name = nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="indexes-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 442</span>
442:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">indexes</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>)
443:         <span class="ruby-identifier">indexes</span> = []
444:         <span class="ruby-identifier">current_index</span> = <span class="ruby-keyword kw">nil</span>
445:         <span class="ruby-identifier">result</span> = <span class="ruby-identifier">execute</span>(<span class="ruby-node">&quot;SHOW KEYS FROM #{quote_table_name(table_name)}&quot;</span>, <span class="ruby-identifier">name</span>)
446:         <span class="ruby-identifier">result</span>.<span class="ruby-identifier">each</span>(<span class="ruby-value">:symbolize_keys</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:hash</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
447:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_index</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">row</span>[<span class="ruby-value">:Key_name</span>]
448:             <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">row</span>[<span class="ruby-value">:Key_name</span>] <span class="ruby-operator">==</span> <span class="ruby-constant">PRIMARY</span> <span class="ruby-comment cmt"># skip the primary key</span>
449:             <span class="ruby-identifier">current_index</span> = <span class="ruby-identifier">row</span>[<span class="ruby-value">:Key_name</span>]
450:             <span class="ruby-identifier">indexes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">IndexDefinition</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">row</span>[<span class="ruby-value">:Table</span>], <span class="ruby-identifier">row</span>[<span class="ruby-value">:Key_name</span>], <span class="ruby-identifier">row</span>[<span class="ruby-value">:Non_unique</span>] <span class="ruby-operator">==</span> <span class="ruby-value">0</span>, [], [])
451:           <span class="ruby-keyword kw">end</span>
452: 
453:           <span class="ruby-identifier">indexes</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">columns</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">row</span>[<span class="ruby-value">:Column_name</span>]
454:           <span class="ruby-identifier">indexes</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">lengths</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">row</span>[<span class="ruby-value">:Sub_part</span>]
455:         <span class="ruby-keyword kw">end</span>
456:         <span class="ruby-identifier">indexes</span>
457:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="insert-sql-method" class="method-detail ">
				<a name="method-i-insert_sql"></a>

				<div class="method-heading">
				
					<span class="method-name">insert_sql</span><span
						class="method-args">(sql, name = nil, pk = nil, id_value = nil, sequence_name = nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="insert-sql-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 324</span>
324:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">insert_sql</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">pk</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">id_value</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">sequence_name</span> = <span class="ruby-keyword kw">nil</span>)
325:         <span class="ruby-keyword kw">super</span>
326:         <span class="ruby-identifier">id_value</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">last_id</span>
327:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				
				<div class="aliases">
					Also aliased as: <a href="Mysql2Adapter.html#method-i-create">create</a>
				</div>
				

				
			</div>

		
			<div id="limited-update-conditions-method" class="method-detail ">
				<a name="method-i-limited_update_conditions"></a>

				<div class="method-heading">
				
					<span class="method-name">limited_update_conditions</span><span
						class="method-args">(where_sql, quoted_table_name, quoted_primary_key)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="limited-update-conditions-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 576</span>
576:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">limited_update_conditions</span>(<span class="ruby-identifier">where_sql</span>, <span class="ruby-identifier">quoted_table_name</span>, <span class="ruby-identifier">quoted_primary_key</span>)
577:         <span class="ruby-identifier">where_sql</span>
578:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="native-database-types-method" class="method-detail ">
				<a name="method-i-native_database_types"></a>

				<div class="method-heading">
				
					<span class="method-name">native_database_types</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="native-database-types-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 188</span>
188:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">native_database_types</span>
189:         <span class="ruby-constant">NATIVE_DATABASE_TYPES</span>
190:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="pk-and-sequence-for-method" class="method-detail ">
				<a name="method-i-pk_and_sequence_for"></a>

				<div class="method-heading">
				
					<span class="method-name">pk_and_sequence_for</span><span
						class="method-args">(table)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="pk-and-sequence-for-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 557</span>
557:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pk_and_sequence_for</span>(<span class="ruby-identifier">table</span>)
558:         <span class="ruby-identifier">keys</span> = []
559:         <span class="ruby-identifier">result</span> = <span class="ruby-identifier">execute</span>(<span class="ruby-node">&quot;describe #{quote_table_name(table)}&quot;</span>)
560:         <span class="ruby-identifier">result</span>.<span class="ruby-identifier">each</span>(<span class="ruby-value">:symbolize_keys</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:hash</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
561:           <span class="ruby-identifier">keys</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">row</span>[<span class="ruby-value">:Field</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">row</span>[<span class="ruby-value">:Key</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;PRI&quot;</span>
562:         <span class="ruby-keyword kw">end</span>
563:         <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> [<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">first</span>, <span class="ruby-keyword kw">nil</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
564:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="primary-key-method" class="method-detail ">
				<a name="method-i-primary_key"></a>

				<div class="method-heading">
				
					<span class="method-name">primary_key</span><span
						class="method-args">(table)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns just a table&#8217;s primary key
</p>
					

					
					<div class="method-source-code"
						id="primary-key-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 567</span>
567:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">primary_key</span>(<span class="ruby-identifier">table</span>)
568:         <span class="ruby-identifier">pk_and_sequence</span> = <span class="ruby-identifier">pk_and_sequence_for</span>(<span class="ruby-identifier">table</span>)
569:         <span class="ruby-identifier">pk_and_sequence</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">pk_and_sequence</span>.<span class="ruby-identifier">first</span>
570:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="quote-method" class="method-detail ">
				<a name="method-i-quote"></a>

				<div class="method-heading">
				
					<span class="method-name">quote</span><span
						class="method-args">(value, column = nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
QUOTING ==================================================
</p>
					

					
					<div class="method-source-code"
						id="quote-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 194</span>
194:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quote</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">column</span> = <span class="ruby-keyword kw">nil</span>)
195:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">column</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-value">:binary</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:string_to_binary</span>)
196:           <span class="ruby-identifier">s</span> = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">string_to_binary</span>(<span class="ruby-identifier">value</span>).<span class="ruby-identifier">unpack</span>(<span class="ruby-value str">&quot;H*&quot;</span>)[<span class="ruby-value">0</span>]
197:           <span class="ruby-node">&quot;x'#{s}'&quot;</span>
198:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">BigDecimal</span>)
199:           <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-value str">&quot;F&quot;</span>)
200:         <span class="ruby-keyword kw">else</span>
201:           <span class="ruby-keyword kw">super</span>
202:         <span class="ruby-keyword kw">end</span>
203:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="quote-string-method" class="method-detail ">
				<a name="method-i-quote_string"></a>

				<div class="method-heading">
				
					<span class="method-name">quote_string</span><span
						class="method-args">(string)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="quote-string-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 213</span>
213:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quote_string</span>(<span class="ruby-identifier">string</span>)
214:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-identifier">string</span>)
215:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="quoted-false-method" class="method-detail ">
				<a name="method-i-quoted_false"></a>

				<div class="method-heading">
				
					<span class="method-name">quoted_false</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="quoted-false-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 221</span>
221:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quoted_false</span>
222:         <span class="ruby-constant">QUOTED_FALSE</span>
223:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="quoted-true-method" class="method-detail ">
				<a name="method-i-quoted_true"></a>

				<div class="method-heading">
				
					<span class="method-name">quoted_true</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="quoted-true-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 217</span>
217:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quoted_true</span>
218:         <span class="ruby-constant">QUOTED_TRUE</span>
219:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="reconnect--method" class="method-detail ">
				<a name="method-i-reconnect%21"></a>

				<div class="method-heading">
				
					<span class="method-name">reconnect!</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="reconnect--source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 248</span>
248:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reconnect!</span>
249:         <span class="ruby-identifier">disconnect!</span>
250:         <span class="ruby-identifier">connect</span>
251:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="recreate-database-method" class="method-detail ">
				<a name="method-i-recreate_database"></a>

				<div class="method-heading">
				
					<span class="method-name">recreate_database</span><span
						class="method-args">(name, options = {})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="recreate-database-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 392</span>
392:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">recreate_database</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {})
393:         <span class="ruby-identifier">drop_database</span>(<span class="ruby-identifier">name</span>)
394:         <span class="ruby-identifier">create_database</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span>)
395:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="release-savepoint-method" class="method-detail ">
				<a name="method-i-release_savepoint"></a>

				<div class="method-heading">
				
					<span class="method-name">release_savepoint</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="release-savepoint-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 361</span>
361:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">release_savepoint</span>
362:         <span class="ruby-identifier">execute</span>(<span class="ruby-node">&quot;RELEASE SAVEPOINT #{current_savepoint_name}&quot;</span>)
363:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="rename-column-method" class="method-detail ">
				<a name="method-i-rename_column"></a>

				<div class="method-heading">
				
					<span class="method-name">rename_column</span><span
						class="method-args">(table_name, column_name, new_column_name)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="rename-column-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 516</span>
516:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rename_column</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">new_column_name</span>)
517:         <span class="ruby-identifier">options</span> = {}
518:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">column</span> = <span class="ruby-identifier">columns</span>(<span class="ruby-identifier">table_name</span>).<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">column_name</span>.<span class="ruby-identifier">to_s</span> }
519:           <span class="ruby-identifier">options</span>[<span class="ruby-value">:default</span>] = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">default</span>
520:           <span class="ruby-identifier">options</span>[<span class="ruby-value">:null</span>] = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">null</span>
521:         <span class="ruby-keyword kw">else</span>
522:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecordError</span>, <span class="ruby-node">&quot;No such column: #{table_name}.#{column_name}&quot;</span>
523:         <span class="ruby-keyword kw">end</span>
524:         <span class="ruby-identifier">current_type</span> = <span class="ruby-identifier">select_one</span>(<span class="ruby-node">&quot;SHOW COLUMNS FROM #{quote_table_name(table_name)} LIKE '#{column_name}'&quot;</span>)[<span class="ruby-value str">&quot;Type&quot;</span>]
525:         <span class="ruby-identifier">rename_column_sql</span> = <span class="ruby-node">&quot;ALTER TABLE #{quote_table_name(table_name)} CHANGE #{quote_column_name(column_name)} #{quote_column_name(new_column_name)} #{current_type}&quot;</span>
526:         <span class="ruby-identifier">add_column_options!</span>(<span class="ruby-identifier">rename_column_sql</span>, <span class="ruby-identifier">options</span>)
527:         <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">rename_column_sql</span>)
528:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="rename-table-method" class="method-detail ">
				<a name="method-i-rename_table"></a>

				<div class="method-heading">
				
					<span class="method-name">rename_table</span><span
						class="method-args">(table_name, new_name)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="rename-table-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 473</span>
473:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rename_table</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">new_name</span>)
474:         <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;RENAME TABLE #{quote_table_name(table_name)} TO #{quote_table_name(new_name)}&quot;</span>
475:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="requires-reloading--method" class="method-detail ">
				<a name="method-i-requires_reloading%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">requires_reloading?</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
this is set to true in 2.3, but we don&#8217;t want it to be
</p>
					

					
					<div class="method-source-code"
						id="requires-reloading--source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 254</span>
254:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">requires_reloading?</span>
255:         <span class="ruby-keyword kw">false</span>
256:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="reset--method" class="method-detail ">
				<a name="method-i-reset%21"></a>

				<div class="method-heading">
				
					<span class="method-name">reset!</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="reset--source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 265</span>
265:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset!</span>
266:         <span class="ruby-identifier">disconnect!</span>
267:         <span class="ruby-identifier">connect</span>
268:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="rollback-db-transaction-method" class="method-detail ">
				<a name="method-i-rollback_db_transaction"></a>

				<div class="method-heading">
				
					<span class="method-name">rollback_db_transaction</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="rollback-db-transaction-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 347</span>
347:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rollback_db_transaction</span>
348:         <span class="ruby-identifier">execute</span> <span class="ruby-value str">&quot;ROLLBACK&quot;</span>
349:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>
350:         <span class="ruby-comment cmt"># Transactions aren't supported</span>
351:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="rollback-to-savepoint-method" class="method-detail ">
				<a name="method-i-rollback_to_savepoint"></a>

				<div class="method-heading">
				
					<span class="method-name">rollback_to_savepoint</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="rollback-to-savepoint-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 357</span>
357:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rollback_to_savepoint</span>
358:         <span class="ruby-identifier">execute</span>(<span class="ruby-node">&quot;ROLLBACK TO SAVEPOINT #{current_savepoint_name}&quot;</span>)
359:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="select-rows-method" class="method-detail ">
				<a name="method-i-select_rows"></a>

				<div class="method-heading">
				
					<span class="method-name">select_rows</span><span
						class="method-args">(sql, name = nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns an array of arrays containing the field values. Order is the same
as that returned by <tt>columns</tt>.
</p>
					

					
					<div class="method-source-code"
						id="select-rows-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 302</span>
302:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">select_rows</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>)
303:         <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span>).<span class="ruby-identifier">to_a</span>
304:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="show-variable-method" class="method-detail ">
				<a name="method-i-show_variable"></a>

				<div class="method-heading">
				
					<span class="method-name">show_variable</span><span
						class="method-args">(name)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="show-variable-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 552</span>
552:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">show_variable</span>(<span class="ruby-identifier">name</span>)
553:         <span class="ruby-identifier">variables</span> = <span class="ruby-identifier">select_all</span>(<span class="ruby-node">&quot;SHOW VARIABLES LIKE '#{name}'&quot;</span>)
554:         <span class="ruby-identifier">variables</span>.<span class="ruby-identifier">first</span>[<span class="ruby-value str">'Value'</span>] <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">variables</span>.<span class="ruby-identifier">empty?</span>
555:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="structure-dump-method" class="method-detail ">
				<a name="method-i-structure_dump"></a>

				<div class="method-heading">
				
					<span class="method-name">structure_dump</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
SCHEMA STATEMENTS ========================================
</p>
					

					
					<div class="method-source-code"
						id="structure-dump-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 379</span>
379:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">structure_dump</span>
380:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">supports_views?</span>
381:           <span class="ruby-identifier">sql</span> = <span class="ruby-value str">&quot;SHOW FULL TABLES WHERE Table_type = 'BASE TABLE'&quot;</span>
382:         <span class="ruby-keyword kw">else</span>
383:           <span class="ruby-identifier">sql</span> = <span class="ruby-value str">&quot;SHOW TABLES&quot;</span>
384:         <span class="ruby-keyword kw">end</span>
385: 
386:         <span class="ruby-identifier">select_all</span>(<span class="ruby-identifier">sql</span>).<span class="ruby-identifier">inject</span>(<span class="ruby-value str">&quot;&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">structure</span>, <span class="ruby-identifier">table</span><span class="ruby-operator">|</span>
387:           <span class="ruby-identifier">table</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'Table_type'</span>)
388:           <span class="ruby-identifier">structure</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">select_one</span>(<span class="ruby-node">&quot;SHOW CREATE TABLE #{quote_table_name(table.to_a.first.last)}&quot;</span>)[<span class="ruby-value str">&quot;Create Table&quot;</span>] <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;;\n\n&quot;</span>
389:         <span class="ruby-keyword kw">end</span>
390:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="supports-migrations--method" class="method-detail ">
				<a name="method-i-supports_migrations%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">supports_migrations?</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="supports-migrations--source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 176</span>
176:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">supports_migrations?</span>
177:         <span class="ruby-keyword kw">true</span>
178:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="supports-primary-key--method" class="method-detail ">
				<a name="method-i-supports_primary_key%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">supports_primary_key?</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="supports-primary-key--source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 180</span>
180:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">supports_primary_key?</span>
181:         <span class="ruby-keyword kw">true</span>
182:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="supports-savepoints--method" class="method-detail ">
				<a name="method-i-supports_savepoints%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">supports_savepoints?</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="supports-savepoints--source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 184</span>
184:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">supports_savepoints?</span>
185:         <span class="ruby-keyword kw">true</span>
186:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="tables-method" class="method-detail ">
				<a name="method-i-tables"></a>

				<div class="method-heading">
				
					<span class="method-name">tables</span><span
						class="method-args">(name = nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="tables-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 430</span>
430:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tables</span>(<span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>)
431:         <span class="ruby-identifier">tables</span> = []
432:         <span class="ruby-identifier">execute</span>(<span class="ruby-value str">&quot;SHOW TABLES&quot;</span>, <span class="ruby-identifier">name</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span>
433:           <span class="ruby-identifier">tables</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">field</span>.<span class="ruby-identifier">first</span>
434:         <span class="ruby-keyword kw">end</span>
435:         <span class="ruby-identifier">tables</span>
436:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="type-to-sql-method" class="method-detail ">
				<a name="method-i-type_to_sql"></a>

				<div class="method-heading">
				
					<span class="method-name">type_to_sql</span><span
						class="method-args">(type, limit = nil, precision = nil, scale = nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Maps logical Rails types to MySQL-specific data types.
</p>
					

					
					<div class="method-source-code"
						id="type-to-sql-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 531</span>
531:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">type_to_sql</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">limit</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">precision</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">scale</span> = <span class="ruby-keyword kw">nil</span>)
532:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">super</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">type</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'integer'</span>
533: 
534:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">limit</span>
535:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">1</span>; <span class="ruby-value str">'tinyint'</span>
536:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">2</span>; <span class="ruby-value str">'smallint'</span>
537:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">3</span>; <span class="ruby-value str">'mediumint'</span>
538:         <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-value">4</span>, <span class="ruby-value">11</span>; <span class="ruby-value str">'int(11)'</span>  <span class="ruby-comment cmt"># compatibility with MySQL default</span>
539:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">5</span><span class="ruby-operator">..</span><span class="ruby-value">8</span>; <span class="ruby-value str">'bigint'</span>
540:         <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">raise</span>(<span class="ruby-constant">ActiveRecordError</span>, <span class="ruby-node">&quot;No integer type has byte size #{limit}&quot;</span>)
541:         <span class="ruby-keyword kw">end</span>
542:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="update-sql-method" class="method-detail ">
				<a name="method-i-update_sql"></a>

				<div class="method-heading">
				
					<span class="method-name">update_sql</span><span
						class="method-args">(sql, name = nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="update-sql-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 330</span>
330:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_sql</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>)
331:         <span class="ruby-keyword kw">super</span>
332:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">affected_rows</span>
333:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="protected-instance-method-details" class="method-section section">
			<h3 class="section-header">Protected Instance Methods</h3>

		
			<div id="quoted-columns-for-index-method" class="method-detail ">
				<a name="method-i-quoted_columns_for_index"></a>

				<div class="method-heading">
				
					<span class="method-name">quoted_columns_for_index</span><span
						class="method-args">(column_names, options = {})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="quoted-columns-for-index-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 581</span>
581:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quoted_columns_for_index</span>(<span class="ruby-identifier">column_names</span>, <span class="ruby-identifier">options</span> = {})
582:           <span class="ruby-identifier">length</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:length</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
583: 
584:           <span class="ruby-identifier">quoted_column_names</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">length</span>
585:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>
586:             <span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">length</span>[<span class="ruby-identifier">name</span>] <span class="ruby-operator">?</span> <span class="ruby-node">&quot;#{quote_column_name(name)}(#{length[name]})&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">quote_column_name</span>(<span class="ruby-identifier">name</span>) }
587:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Fixnum</span>
588:             <span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{quote_column_name(name)}(#{length})&quot;</span>}
589:           <span class="ruby-keyword kw">else</span>
590:             <span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">quote_column_name</span>(<span class="ruby-identifier">name</span>) }
591:           <span class="ruby-keyword kw">end</span>
592:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="translate-exception-method" class="method-detail ">
				<a name="method-i-translate_exception"></a>

				<div class="method-heading">
				
					<span class="method-name">translate_exception</span><span
						class="method-args">(exception, message)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="translate-exception-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 594</span>
594:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">translate_exception</span>(<span class="ruby-identifier">exception</span>, <span class="ruby-identifier">message</span>)
595:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">super</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:error_number</span>)
596: 
597:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">error_number</span>
598:           <span class="ruby-keyword kw">when</span> <span class="ruby-value">1062</span>
599:             <span class="ruby-constant">RecordNotUnique</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">message</span>, <span class="ruby-identifier">exception</span>)
600:           <span class="ruby-keyword kw">when</span> <span class="ruby-value">1452</span>
601:             <span class="ruby-constant">InvalidForeignKey</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">message</span>, <span class="ruby-identifier">exception</span>)
602:           <span class="ruby-keyword kw">else</span>
603:             <span class="ruby-keyword kw">super</span>
604:           <span class="ruby-keyword kw">end</span>
605:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="private-instance-method-details" class="method-section section">
			<h3 class="section-header">Private Instance Methods</h3>

		
			<div id="column-for-method" class="method-detail ">
				<a name="method-i-column_for"></a>

				<div class="method-heading">
				
					<span class="method-name">column_for</span><span
						class="method-args">(table_name, column_name)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="column-for-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 646</span>
646:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">column_for</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
647:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">column</span> = <span class="ruby-identifier">columns</span>(<span class="ruby-identifier">table_name</span>).<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">column_name</span>.<span class="ruby-identifier">to_s</span> }
648:             <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;No such column: #{table_name}.#{column_name}&quot;</span>
649:           <span class="ruby-keyword kw">end</span>
650:           <span class="ruby-identifier">column</span>
651:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="configure-connection-method" class="method-detail ">
				<a name="method-i-configure_connection"></a>

				<div class="method-heading">
				
					<span class="method-name">configure_connection</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="configure-connection-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 613</span>
613:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">configure_connection</span>
614:           <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">query_options</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:array</span>)
615: 
616:           <span class="ruby-comment cmt"># By default, MySQL 'where id is null' selects the last inserted id.</span>
617:           <span class="ruby-comment cmt"># Turn this off. http://dev.rubyonrails.org/ticket/6778</span>
618:           <span class="ruby-identifier">variable_assignments</span> = [<span class="ruby-value str">'SQL_AUTO_IS_NULL=0'</span>]
619:           <span class="ruby-identifier">encoding</span> = <span class="ruby-ivar">@config</span>[<span class="ruby-value">:encoding</span>]
620: 
621:           <span class="ruby-comment cmt"># make sure we set the encoding</span>
622:           <span class="ruby-identifier">variable_assignments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;NAMES '#{encoding}'&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">encoding</span>
623: 
624:           <span class="ruby-comment cmt"># increase timeout so mysql server doesn't disconnect us</span>
625:           <span class="ruby-identifier">wait_timeout</span> = <span class="ruby-ivar">@config</span>[<span class="ruby-value">:wait_timeout</span>]
626:           <span class="ruby-identifier">wait_timeout</span> = <span class="ruby-value">2592000</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">wait_timeout</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Fixnum</span>)
627:           <span class="ruby-identifier">variable_assignments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;@@wait_timeout = #{wait_timeout}&quot;</span>
628: 
629:           <span class="ruby-identifier">execute</span>(<span class="ruby-node">&quot;SET #{variable_assignments.join(', ')}&quot;</span>, <span class="ruby-value">:skip_logging</span>)
630:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="connect-method" class="method-detail ">
				<a name="method-i-connect"></a>

				<div class="method-heading">
				
					<span class="method-name">connect</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="connect-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 608</span>
608:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connect</span>
609:           <span class="ruby-ivar">@connection</span> = <span class="ruby-constant">Mysql2</span><span class="ruby-operator">::</span><span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@config</span>)
610:           <span class="ruby-identifier">configure_connection</span>
611:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="select-method" class="method-detail ">
				<a name="method-i-select"></a>

				<div class="method-heading">
				
					<span class="method-name">select</span><span
						class="method-args">(sql, name = nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns an array of record hashes with the column names as keys and column
values as values.
</p>
					

					
					<div class="method-source-code"
						id="select-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 634</span>
634:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">select</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>)
635:           <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span>).<span class="ruby-identifier">each</span>(<span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:hash</span>)
636:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="supports-views--method" class="method-detail ">
				<a name="method-i-supports_views%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">supports_views?</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="supports-views--source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 638</span>
638:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">supports_views?</span>
639:           <span class="ruby-identifier">version</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">&gt;=</span> <span class="ruby-value">5</span>
640:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="version-method" class="method-detail ">
				<a name="method-i-version"></a>

				<div class="method-heading">
				
					<span class="method-name">version</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="version-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/connection_adapters/mysql2_adapter.rb, line 642</span>
642:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">version</span>
643:           <span class="ruby-ivar">@version</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">info</span>[<span class="ruby-value">:version</span>].<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/^(\d+)\.(\d+)\.(\d+)/</span>).<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">to_i</span> }
644:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

